<html>
  <head>
    <title>WS</title>
  </head>

  <body>
    <h1>WS</h1>
    <button onclick="send()">send</button>
    <div id="chat"></div>

    <script>
      let socket = new WebSocket(
        "ws://go-webservice-cg7lqxhiua-ew.a.run.app/ws"
      );
      console.log("Attempting Websocket Connection");

      socket.onopen = () => {
        console.log("Successfully Connected");
        socket.send(
          JSON.stringify({ data: "test message from browser", type: "test" })
        );
      };

      socket.onmessage = (msg) => {
        const para = document.createElement("p");
        para.innerHTML = msg.data;
        document.getElementById("chat").appendChild(para);
      };

      socket.onclose = (event) => {
        console.log("Socket Closed Connection: ", event);
      };

      socket.onerror = (error) => {
        console.log("Socket Error: ", error);
      };

      function send() {
        socket.send(
          JSON.stringify({ data: "button data", type: "button type" })
        );
      }
    </script>
  </body>
</html>
